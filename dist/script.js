let pokemonRepository=function(){let e=[];function t(t){"object"==typeof t&&"name"in t?e.push(t):console.log("pokemon is not correct")}function n(){return e}function i(e){pokemonRepository.loadDetails(e).then(function(){let t=document.querySelector("#modal-container");t.innerHTML="";let n=document.createElement("div");n.classList.add("modal");let o=document.createElement("img");o.classList.add("sprite"),o.src=e.imageUrl;let l=document.createElement("button");l.classList.add("modal-close"),l.innerText="X",l.addEventListener("click",d);let s=document.createElement("h1");s.innerText=e.name;let a=document.createElement("p"),r="";for(let c=0;c<e.types.length;c++)r+=e.types[c].type.name,c<e.types.length-1&&(r+=", ");function d(){t.classList.remove("is-visible")}a.innerText="Height: "+e.height+"\n\nTypes: "+r,n.appendChild(l),n.appendChild(s),n.appendChild(a),t.appendChild(n),n.appendChild(o),t.classList.add("is-visible"),window.addEventListener("keydown",e=>{"Escape"===e.key&&t.classList.contains("is-visible")&&d()}),t.addEventListener("click",e=>{e.target===t&&d()}),document.querySelector("button.button-class").addEventListener("click",()=>{i("Modal Title","Modal Content")})})}return{add:t,getAll:n,addListItem:function e(t){let n=document.querySelector(".pokemon-list"),o=document.createElement("li");$("li").addClass("group-list-item");let l=document.createElement("button");l.innerText=t.name,l.classList.add("button-class"),l.setAttribute("aria-label",t.name),o.appendChild(l),n.appendChild(o),l.addEventListener("click",function(e){i(t)})},loadList:function e(){return fetch("https://pokeapi.co/api/v2/pokemon/?limit=20").then(function(e){return e.json()}).then(function(e){e.results.forEach(function(e){t({name:e.name,detailsUrl:e.url})})}).catch(function(e){console.error(e)})},loadDetails:function e(t){return fetch(t.detailsUrl).then(function(e){return e.json()}).then(function(e){t.imageUrl=e.sprites.front_default,t.height=e.height,t.types=e.types}).catch(function(e){console.error(e)})},showDetails:i}}();pokemonRepository.loadList().then(function(){pokemonRepository.getAll().forEach(function(e){pokemonRepository.addListItem(e)})});
